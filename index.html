<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
    <link rel="stylesheet" href="css.css">

</head>
<body>
    <center>
        <form id="orderForm" onsubmit="takeOder()" action="#">
            <div id="personDiv">
                <h3>Coustomer Name</h3>
                <input type="text" id="personName" class="person" placeholder="Enter Name" />
                <h3>Coustomer Number</h3>
                <input type="number" id="personNum" class="person" placeholder="Enter Number" />
            </div>
            <table>
                <thead>
                    <tr>
                        <th>DISH NAME</th>
                        <th>ORDER</th>
                        <th>QTY</th>
                        <th>PRICE</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>Karachi Baryani</td>
                        <td>
                            <label class="container">
                                <input data-name="Karachi Baryani" data-price="100" class="dish-selector" type="checkbox" />
                                <span class="checkmark"></span>
                            </label>

                            </th>
                        <td><input type="number" class="qty" /></td>
                        <td>100</td>
                    </tr>

                    <tr>
                        <td>Zinger Burger</td>
                        <td>
                            <label class="container">
                                <input data-name="Zinger Burger" data-price="300" class="dish-selector" type="checkbox" />
                                <span class="checkmark"></span>
                            </label>
                        </td>
                        <td><input type="number" class="qty"></td>
                        <td>300</td>
                    </tr>

                    <tr>
                        <td>Piza</td>
                        <td>
                            <label class="container">
                                <input data-name="Piza" data-price="1000" class="dish-selector" type="checkbox" />
                                <span class="checkmark"></span>
                            </label>
                        </td>
                        <td><input type="number" class="qty" /></td>
                        <td>1000</td>
                    </tr>

                    <tr>
                        <td>Cheese Piza</td>
                        <td>
                            <label class="container">
                                <input data-name="Cheese Piza" data-price="1500" class="dish-selector" type="checkbox" />
                                <span class="checkmark"></span>
                            </label>
                        </td>
                        <td><input type="number" class="qty" /></td>
                        <td>1500</td>
                    </tr>

                    <tr>
                        <td colspan="4"><button>Place Order</button></td>
                    </tr>
                    <tr>
                        <!-- <td colspan="2"></td> -->
                        <td colspan="4" id="totalPrice"></td>
                    </tr>
                    <!--   <tr>
                        <td colspan="2"></td>
                        <td colspan="2" class="printDiscountedPrice"></td>
                    </tr> -->


                </tbody>
            </table>
        </form>
        <!-- <div id="billResult"></div> -->
</body>
</center>


<script>

    //Classsss
    class FoodDish {
        constructor(name, price) {
            this.name = name;
            this.price = price;
        }
    }


    let orderedDishes = [];
    let totalBill = 0;

    let discountedBill = 0;
    //oder
    function takeOder() {

        event.preventDefault();
        orderedDishes.length = 0;
        totalBill = 0;
        totalPrice.innerHTML = '';



        let dishSelector = document.querySelectorAll('.dish-selector');
        dishSelector.forEach(function (tag) {
            if (tag.checked) {

                var qty = tag.parentNode.parentNode.nextElementSibling.querySelector('input').value;
                console.log(qty);

                let name = tag.getAttribute('data-name');
                let price = tag.getAttribute('data-price');

                newPrice = price * qty;
                console.log(newPrice)

                totalBill += +newPrice;

                let orderedDish = new FoodDish(name, price);
                orderedDishes.push(orderedDish);
            }
        });

        discountedBill = totalBill;

        if (totalBill > 300) {
            discountedBill = totalBill - (totalBill * 5 / 100);
        }
        console.log('Total Jurmana' + ' = ' + totalBill);
        console.log('Discounted Jurmana' + ' = ' + discountedBill);

        var personName = document.getElementById('personName').value;
        var personNum = document.getElementById('personNum').value;

        var price1 = document.createElement('p');
        price1.innerHTML = '<h3>Name :' + personName + '</h3><h3>No. :' + personNum + '</h3><h3>RS. ' + totalBill + '</h3>';
        totalPrice.appendChild(price1);
        //end of function takeOder
        }       
        //JASON
        // var myObj, myJSON, text, obj;

        //Storing data:
        // myObj = { price1 };
        // myJSON = JSON.stringify(myObj);
        // localStorage.setItem("testJSON", myJSON);

        //Retrieving data:
        // text = localStorage.getItem("testJSON");
        // obj = JSON.parse(text);
        // document.getElementById("demo").innerHTML = obj.name;
        localStorage.setItem("keyname", JSON.stringify(studentArray));
        localStorage.setItem("Student Data", JSON.stringify(ArrayName));

</script>

</html>